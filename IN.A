'|IN.A ASCII-Eingabe-FKT 
'|     aus DiskWorks
'|(C) 1992 by KiKiSoft
'+------------------------

JP CSTART ->FUER CALL DW
'           AUS BASIC
'           FUER DW

INPUT:  EINGABE IN A$
PUSH HL
PUSH DE
PUSH BC
EX DE,HL
CALL PRTSTR
EX DE,HL
CALL CRSRSET

LD HL,ASTR A$
PUSH HL
LD DE,ASTR+1 A$
LD BC,&000F
LD (HL),CR
LDIR

POP HL
LD B,0

IP_01:
CALL INKEYC
CP CR
JR Z,IP_EX
CP BS
JR Z,IP_04
CP MODE
JR Z,IP_EX1

IP_05:
LD (HL),A
PUSH HL
PUSH BC
CALL PRTAKKU
POP BC
POP HL
INC HL
INC B
LD A,B
CP 15
JR Z,IP_EX
JR IP_01

IP_04:  BACKSPACE
LD A,B
OR A
JR Z,IP_01
DEC HL
DEC B
LD A,(CURX)
DEC A
LD (CURX),A
PUSH AF
LD A," "
CALL PRTAKKU
POP AF
LD (CURX),A
JR IP_01

IP_EX: EINGABEN GšLTIG
SCF
CCF
POP BC
POP DE
POP HL
RET

IP_EX1: EINGABEN UNGšLTIG
SCF
POP BC
POP DE
POP HL
RET

ENDC

